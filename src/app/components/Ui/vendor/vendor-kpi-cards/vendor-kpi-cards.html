@if (boothBase(); as booth) {

  <section class="app-dashboard">

    <div class="stats">
      <div class="stat-card blue">
        <div class="stat-title">Sales Reps At Event</div>
        <div class="stat-number">{{ booth.repCount }}</div>
        <div class="stat-link">View Reps</div>
      </div>

      <div class="stat-card teal">
        <div class="stat-title">Total scans</div>
        <div class="stat-number">{{ booth.totalScanCount }}</div>
        <div class="stat-link">See scan activity</div>
      </div>

      <div class="stat-card red">
        <div class="stat-title">Active Reps</div>
        <div class="stat-number">{{ booth.activeRepCount }}</div>
        <div class="stat-link">Rep Performance</div>
      </div>

      <div class="stat-card purple">
        <div class="stat-title">Avg scans per Rep</div>
        <div class="stat-number">
          {{ (booth.repCount ? (booth.totalScanCount / booth.repCount) : 0) | number:'1.0-2' }}
        </div>
        <div class="stat-link">
          Peak Scan Day:
          {{ booth.peakScanDay?.day ?? '—' }}
        </div>
      </div>
    </div>

    <div class="stats-row2">

      <div class="stat-card large">
        <div class="header-large">
          <div>
            <div class="stat-title large">Scans Over Time &amp; Scans</div>
            <div class="stat-sub">Over time</div>
          </div>

          <div class="panel-actions">
            <div class="today-count">Today: 34</div>

            <mat-form-field appearance="outline">
              <mat-select value="today">
                <mat-option value="today">Today</mat-option>
                <mat-option value="7">Last 7 days</mat-option>
                <mat-option value="30">Last 30 days</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>

        <div class="panel-body">
          <div class="chart-placeholder">Chart</div>
        </div>
      </div>

      <div class="stat-card large" name="VendorEngagement">
        <div class="header-large">
          <div>
            <div class="stat-title large">Rep Engagement</div>
            <div class="stat-sub">Snapshot</div>
          </div>
          <div class="panel-link">View breakdown</div>
        </div>

        <div class="panel-metrics">
          <div class="metric-row">
            <span>Active Reps</span>
            <strong>{{ booth.activeRepCount }}</strong>
          </div>

          <div class="metric-row">
            <span>Top Rep</span>
            <strong>
              @if (repAnalytics()?.reps?.length) {
                {{ repAnalytics()!.reps[0]?.firstName ?? '—' }}
              } @else {
                —
              }
            </strong>
          </div>

          <div class="metric-row">
            <span>Inactive Reps</span>
            <strong>{{ booth.repCount - booth.activeRepCount }}</strong>
          </div>
        </div>

        <div class="panel-footer">Tap to view vendor breakdown</div>
      </div>

      <div class="stat-card large">
        <div class="header-large">
          <div>
            <div class="stat-title large">Attendee Engagement</div>
            <div class="stat-sub">Snapshot</div>
          </div>
          <div class="panel-link">View details</div>
        </div>

        <div class="panel-metrics">
          <div class="metric-row">
            <span>Attendees Scanned</span>
            <strong>{{ booth.attendeesScanned }}</strong>
          </div>

          <div class="metric-row">
            <span>Top Attendee</span>
            <strong>
              @if (booth.topFiveAttendees?.length) {
                {{ booth.topFiveAttendees[0]?.["Attendee.firstName"] }} {{ booth.topFiveAttendees[0]?.["Attendee.lastName"] }}
              } @else {
                —
              }
            </strong>
          </div>

          <div class="metric-row">
            <span>Avg scans / Rep</span>
            <strong>
              {{ (booth.repCount ? (booth.totalScanCount / booth.repCount) : 0) | number:'1.0-2' }}
            </strong>
          </div>
        </div>

        <div class="panel-footer">Tap to explore Rep activity</div>
      </div>

      <div class="stat-card large" name="SalesReps" (click)="onClick('SalesReps')">
        <div class="header-large">
          <div>
            <div class="stat-title large">Sales Reps</div>
          </div>
          <div class="panel-link">{{ booth.activeRepCount }}</div>
        </div>

        <div class="panel-metrics">
          <div class="metric-row">
            <span>Top Five Reps</span>
            <strong></strong>
          </div>

          <div class="list-container">
            @for (repRow of booth.topFiveReps; track $index; let i = $index) {
              @if (i < 5) {
                <div class="list-item">
                  <div class="metric-row-strong">
                    {{ repRow["SalesRep.firstName"] }} {{ repRow["SalesRep.lastName"] }}
                  </div>
                  <div class="metric-row">
                    {{ repRow.ScanCount }} scans
                  </div>
                </div>
              }
            }
          </div>

          <div class="rep-btn-container">
            <button
              mat-flat-button
              color="primary"
              class="primary-btn"
              type="submit"
              name="Register"
              (click)="addRep()"
            >
              Add Rep
            </button>
          </div>
        </div>

        <div class="panel-footer">Tap to view vendor breakdown</div>
      </div>

      <div class="stat-card large" name="Attendees">
        <div class="header-large">
          <div>
            <div class="stat-title large">Attendees</div>
          </div>
          <div class="panel-link">{{ booth.attendeesScanned }}</div>
        </div>

        <div class="panel-metrics">
          <div class="metric-row">
            <span>Top Five Attendees</span>
            <strong></strong>
          </div>

          <div class="list-container">
            @for (att of booth.topFiveAttendees; track $index; let i = $index) {
              @if (i < 5) {
                <div class="list-item">
                  <div class="metric-row-strong">
                    {{ att["Attendee.firstName"] }} {{ att["Attendee.lastName"] }}
                  </div>
                  <div class="metric-row">
                    {{ att.ScanCount }} scans
                  </div>
                </div>
              }
            }
          </div>

          <div class="rep-btn-container">
            <button
              mat-flat-button
              color="primary"
              class="primary-btn"
              type="submit"
              name="Register"
            >
              View Attendee Insights
            </button>
          </div>
        </div>

        <div class="panel-footer">Tap to view Attendee breakdown</div>
      </div>

      <div class="stat-card large" name="Questions">
        <div class="header-large">
          <div>
            <div class="stat-title large">Questions</div>
          </div>
          <div class="panel-link">{{ booth.questions.length }}</div>
        </div>

        <div class="panel-metrics">
          <div class="metric-row">
            <span>Current Questions</span>
            <strong></strong>
          </div>

          <div class="list-container">
            @for (q of booth.questions; track q.id; let i = $index) {
              @if (i < 5) {
                <div class="list-item">
                  <div class="metric-row-strong">
                    {{ q.question }}
                  </div>
                  <div class="metric-row"></div>
                </div>
              }
            }
          </div>

          <div class="rep-btn-container">
            <button
              mat-flat-button
              color="primary"
              class="primary-btn"
              type="submit"
              name="Register"
            >
              Add Question
            </button>
          </div>
        </div>

        <div class="panel-footer">Tap to view all</div>
      </div>

    </div>
  </section>

} @else {

  <section class="app-dashboard">
    <div class="stat-card large">
      <div class="header-large">
        <div>
          <div class="stat-title large">Select an event</div>
          <div class="stat-sub">Choose an event to load analytics</div>
        </div>
      </div>
    </div>
  </section>

}
