
<div class="rep-page">

  <div class="rep-hero stat-card large">

    <div class="rep-hero-left">
      <div class="avatar-wrap">
        <img class="avatar" alt="Rep photo" />
        <span class="status-dot"></span>
      </div>

      @if (vendorData.singlerepAnalytics.value(); as rep) {
        <div class="rep-meta">
          <div class="rep-name-row">
            <div class="rep-name">{{ rep.firstName }} {{ rep.lastName }}</div>
            <span class="rep-status-pill">ACTIVE</span>
          </div>
          <div class="rep-subline">
            {{ rep.email }} • {{ rep.phone }}
          </div>
        </div>
      }
    </div>

    @if (vendorData.singlerepAnalytics.value(); as rep) {
      <div class="rep-hero-right">
        <div class="kpi-mini">
          <div class="kpi-label">TOTAL SCANS</div>
          <div class="kpi-value">{{ rep.totalScans }}</div>
        </div>
        <div class="kpi-mini">
          <div class="kpi-label">AVG SCANS / HR</div>
          <div class="kpi-value">{{ rep.totAvgScansPerHour }}</div>
        </div>
        <div class="kpi-mini">
          <div class="kpi-label">AVG SCANS / DAY</div>
          <div class="kpi-value">{{ rep.avgScansPerDay }}</div>
        </div>
      </div>
    }

  </div>

  <div class="rep-mid">

    <div class="stat-card large">
      <div class="header-large">
        <div>
          <div class="stat-title large">Scans Over Time</div>
          <div class="stat-sub">Hourly performance tracking for today</div>
        </div>

        <div class="panel-actions">
          <button type="button" class="pill active">Today</button>
          <button type="button" class="pill">Yesterday</button>
        </div>
      </div>

      <rep-line-chart></rep-line-chart>
    </div>

    <div class="stat-card large">
      <div class="header-large">
        <div>
          <div class="stat-title large">Performance Insights</div>
          <div class="stat-sub">Summary boxes for later metrics</div>
        </div>
      </div>

      <div class="insights-stack">
        <div class="insight-box">
          <div class="insight-title">PEAK SCANNING WINDOW</div>
          <div class="insight-body"></div>
        </div>

        <div class="insight-box">
          <div class="insight-title">RECOMMENDED FOCUS</div>
          <div class="insight-body"></div>
        </div>
      </div>
    </div>

  </div>

  <div class="rep-bottom">
    <div class="stat-card large">
      <div class="header-large">
        <div>
          <div class="stat-title large">Recent Scans</div>
          <div class="stat-sub">Latest booth interactions</div>
        </div>
        <div class="panel-actions">
          @for (date of chartData.dates(); track date) {
            <button
              type="button"
              class="pill"
              [class.active]="chartData.selectedDay() === date"
              (click)="onDaySelect(date)"
            >
              {{ date }}
            </button>
          }
           <button
              type="button"
              class="pill"
              [class.active]="chartData.selectedDay() === 'TOTAL'"
              (click)="onTotalSelect()"
            >
            Total
            </button>
        </div>
      </div>

      <div class="simple-table">
       <div class="simple-head">
  <div>ATTENDEE</div>
  <div>EMAIL</div>
  <div>PHONE</div>
  <div>NPI</div>
  <div>SPECIALTY</div>
</div>

        @if (vendorData.attendeesResource.value(); as data) {
          @for (attendee of data.attendees; track attendee.id) {
      <div class="simple-row">
  <div class="attendee-cell">
    <div class="mini-badge">
      {{ attendee.firstName[0] }}{{ attendee.lastName[0] }}
    </div>
    <div class="attendee-name">
      {{ attendee.firstName }} {{ attendee.lastName }}
    </div>
  </div>

  <div>{{ attendee.email || '—' }}</div>
  <div>{{ attendee.phone || '—' }}</div>
  <div>{{ attendee.npi || '—' }}</div>
  <div>{{ attendee.specialty || '—' }}</div>
</div>
          }
        }

   @if (vendorData.attendeesResource.value(); as data) {
  <div class="table-footer">
    <div class="pagination-info">
      Showing {{ data.attendees.length }} attendees
    </div>

    <div class="table-nav">
      @if (vendorData.currentCursor()) {
        <button
          type="button"
          class="pill"
          aria-label="Previous"
            (click)="vendorData.attendeePagingBack()"
        >
          <mat-icon>chevron_left</mat-icon>
        </button>
      }

      @if (data.pagination.hasMore) {
        <button
          type="button"
          class="pill active"
          aria-label="Next"
         (click)="vendorData.attendeePagingForward(data.pagination.cursor!)"

        >
          <mat-icon>chevron_right</mat-icon>
        </button>
      }
    </div>
  </div>
}
    

      </div>
    </div>


    <div class="export-card">
      <div class="export-title">Export Analytics</div>
      <div class="export-sub">
        Generate a detailed performance report to share with stakeholders.
      </div>

      <button type="button" class="ui-btn primary export-btn">
        <mat-icon>download</mat-icon>
        Download PDF Report
      </button>

      <button type="button" class="ui-btn secondary export-btn">
        <mat-icon>mail</mat-icon>
        Email to Manager
      </button>
    </div>

  </div>

</div>
